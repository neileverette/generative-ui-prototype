---
phase: 10-claude-card-layout
plan: 01
type: execute
---

<objective>
Completely rebuild ClaudeUsageCard.tsx to match the wireframe design at ~/Desktop/claude.png.

Purpose: The current card is overly complex with features (model breakdown, token counts, API section) that are NOT in the wireframe. Need a clean rebuild matching exact wireframe layout.
Output: Rebuilt ClaudeUsageCard.tsx with correct structure, visual verification against wireframe.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./10-01-SUMMARY.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Wireframe reference:** ~/Desktop/claude.png

**Key file:**
@src/components/a2ui/ClaudeUsageCard.tsx (current: 927 lines, target: ~200 lines)

**Wireframe layout (exact match required):**
1. Header: "Claude" - large bold text, left-aligned
2. Plan Info (3 lines, left-aligned):
   - "Plan: Claude Code Max (5x tier, based on $100/month)"
   - "Cost: $100/m"
   - "Next bill: [mo]/[day]"
3. Warning: "Approaching usage limit" - red text, left-aligned (conditional)
4. 5-hour limit row:
   - Left: "5-hour limit" (bold)
   - Right: "Resets in 5h 0m"
5. Progress bar - full width, red when high usage
6. Usage text: "33% used / 73% remain" - right-aligned
7. Weekly limit row:
   - Left: "Weekly limit" (bold)
   - Right: "Resets in 4 days"
8. Progress bar - full width, gray
9. Usage text: "33% used / 73% remain" - right-aligned

**Remove everything NOT in wireframe:**
- Model breakdown bars
- Token counts display
- Stats grid (Today/MTD/Sessions)
- API section (ApiCreditsSection, ApiTokenSection)
- Plan selector dropdown
- Data source footer
- Info icons
- Zap icon

**Keep:**
- 5-minute auto-refresh interval
- Manual refresh button (but make it subtle)
- Real JSONL data for 5-hour limit
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create new card structure with header and plan info</name>
  <files>src/components/a2ui/ClaudeUsageCard.tsx</files>
  <action>
Replace entire ClaudeUsageCard.tsx with a clean rebuild. Start with:

1. Header section:
   - "Claude" in large bold text (text-2xl or text-3xl, font-bold)
   - Left-aligned

2. Plan info section (3 lines, simple text, left-aligned):
   - Line 1: "Plan:" label (bold) + "Claude Code Max (5x tier, based on $100/month)"
   - Line 2: "Cost:" label (bold) + "$100/m"
   - Line 3: "Next bill:" label (bold) + "[mo]/[day]" (placeholder)

3. Basic card container:
   - White background with subtle border
   - Padding for content
   - Rounded corners

Remove ALL of these helper components:
- SkeletonLoader
- UsageProgressBar (will be rebuilt simpler)
- StatBox
- ModelBar
- PlanSelector
- ClaudeCodeSection
- BalanceEntryForm
- ApiTokenSection
- ApiCreditsSection

Keep only:
- Main ClaudeUsageCard function component
- State for data fetching (claudeCode, isLoading, isRefreshing)
- Data fetching useEffect
- MOCK_CLAUDE_CODE_USAGE export (may need for testing)

Use hardcoded fake data for plan info (this is Phase 11 scope but needed for layout).
  </action>
  <verify>npm run build succeeds, no TypeScript errors</verify>
  <done>Card renders with "Claude" header and plan info section, no old components present</done>
</task>

<task type="auto">
  <name>Task 2: Add progress bar sections for 5-hour and weekly limits</name>
  <files>src/components/a2ui/ClaudeUsageCard.tsx</files>
  <action>
Add both limit sections below plan info:

**5-hour limit section:**
1. Row with "5-hour limit" (bold, left) and "Resets in Xh Xm" (right)
2. Progress bar (full width, rounded, h-2 or h-3)
   - Background: gray-200
   - Fill: red (bg-red-500) when usage high, can use status-based coloring
3. Text below: "X% used / Y% remain" (right-aligned, smaller text)
4. Use REAL data from claudeCode.fiveHourWindow (percentage, resetsIn)

**Weekly limit section:**
1. Row with "Weekly limit" (bold, left) and "Resets in 4 days" (right)
2. Progress bar at 40% (gray fill, bg-gray-400 or similar)
3. Text below: "40% used / 60% remain" (right-aligned)
4. ALL FAKE DATA for weekly (hardcoded 40%)

Keep progress bar styling simple - just a div with rounded corners and width percentage.
Do NOT recreate the old UsageProgressBar component with status colors - keep it simpler.

Progress bar visual:
- Container: h-3 bg-gray-200 rounded-full overflow-hidden
- Fill: h-full rounded-full transition-all (color varies by section)
  </action>
  <verify>npm run build succeeds, card shows both progress sections</verify>
  <done>Card shows 5-hour limit section with real data, weekly limit section with fake 40% data</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Rebuilt ClaudeUsageCard matching wireframe layout</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000
    3. Type "Show Claude usage" in chat to display the card
    4. Compare card against wireframe at ~/Desktop/claude.png
    5. Verify:
       - "Claude" header is large and bold
       - Plan info shows 3 lines (Plan, Cost, Next bill)
       - 5-hour limit section shows label, reset time, progress bar, percentage
       - Weekly limit section shows same structure at 40%
       - NO model breakdown, token counts, stats grid, API section
       - Progress bars are full width, properly colored
  </how-to-verify>
  <resume-signal>Type "approved" if layout matches wireframe, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds without errors
- [ ] No TypeScript errors
- [ ] Card displays correctly in dev server
- [ ] Layout matches wireframe structure
- [ ] Old features removed (model breakdown, API section, etc.)
</verification>

<success_criteria>

- Card structure matches wireframe exactly
- Header shows "Claude" in bold
- Plan info section shows 3 lines
- 5-hour limit section with progress bar (real data)
- Weekly limit section with progress bar (40% fake data)
- All legacy features removed
- No TypeScript errors
- Human verified against wireframe
</success_criteria>

<output>
After completion, create `.planning/phases/phase-10-claude-card-layout/10-01-SUMMARY.md`:

# Phase 10 Plan 01: Card Layout Foundation Summary

**[One-liner describing what shipped]**

## Accomplishments

- [Key changes]

## Files Modified

- `src/components/a2ui/ClaudeUsageCard.tsx` - Rebuilt from scratch

## Decisions Made

[Any implementation choices]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for Phase 11: Plan Info Section (refine plan info display)
</output>
