# Plan 04-01: Polish & UX

## Goal

Add final polish including refresh button, critical state animations, and plan selector. Auto-refresh is already implemented (5min code, 1hr credits).

## Context

- Phases 1-3 delivered functional widget with real data
- Auto-refresh already working
- Critical state border color exists but no animation
- Plan is hardcoded to 'pro' - needs user selection

## Tasks

### 1. Add refresh button to widget header
**File:** `src/components/a2ui/ClaudeUsageCard.tsx` (modify)
- Add RefreshCw icon import
- Add refresh button next to "Claude Code" header
- Show spinning animation while refreshing
- Trigger manual data fetch on click

### 2. Add critical state pulse animation
**File:** `src/index.css` (modify)
- Add `@keyframes pulse-critical` animation
- Add `.animate-pulse-critical` class
- Subtle red border pulse when usage > 90%

### 3. Add plan selector dropdown
**File:** `src/components/a2ui/ClaudeUsageCard.tsx` (modify)
- Add plan selector in Claude Code section header
- Options: Free, Pro, Max (5x), Max (20x)
- Store selection in localStorage
- Update limit display when plan changes

### 4. Build verification
- Run `npm run build`
- Verify no TypeScript errors

## Verification

- [ ] Refresh button visible and spins when clicked
- [ ] Critical state (>90%) shows pulsing border
- [ ] Plan selector changes limit calculation
- [ ] Plan selection persists in localStorage
- [ ] Build passes

## Files

| File | Action | Purpose |
|------|--------|---------|
| `src/components/a2ui/ClaudeUsageCard.tsx` | Modify | Refresh button, plan selector |
| `src/index.css` | Modify | Critical pulse animation |

## Notes

- Keep changes minimal - widget is already functional
- Focus on polish that improves daily usability
- Settings modal deferred to future enhancement
